language: generic

matrix:
  include:
  - os: linux
    sudo: required
    env: TOXENV=py27
  - os: linux
    sudo: required
    env: TOXENV=py36

cache:
  directories:
    - $HOME/miniconda

install:
  - if [[ ! -e "$HOME/miniconda/bin/conda" ]]; then "./.ci_scripts/install_miniconda.sh"; fi
  - export PATH=$HOME/miniconda/bin:$PATH
  - conda config --set always_yes yes --set changeps1 no
  - conda config --add channels defaults
  - conda config --add channels conda-forge
  - source activate test-env
  - conda update --all

script:
  - pip install .
  # - flake8 ngmix  # skipping this for now
  - pytest -vv --pyargs ngmix
  - pip uninstall ngmix -y
